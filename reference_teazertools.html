

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>TeazerTools reference &mdash; PyCppQED v0.1.1 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="PyCppQED v0.1.1 documentation" href="index.html" />
    <link rel="prev" title="PyCppQED Reference" href="reference.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="reference.html" title="PyCppQED Reference"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">PyCppQED v0.1.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="teazertools-reference">
<h1><a class="toc-backref" href="#contents">TeazerTools reference</a><a class="headerlink" href="#teazertools-reference" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#teazertools-reference" id="id1">TeazerTools reference</a><ul>
<li><a class="reference internal" href="#module-teazertools.submitter" id="id2"><a class="reference internal" href="#module-teazertools.submitter" title="teazertools.submitter"><tt class="xref py py-mod docutils literal"><span class="pre">teazertools.submitter</span></tt></a></a></li>
<li><a class="reference internal" href="#module-teazertools.helpers" id="id3"><a class="reference internal" href="#module-teazertools.helpers" title="teazertools.helpers"><tt class="xref py py-mod docutils literal"><span class="pre">teazertools.helpers</span></tt></a></a></li>
<li><a class="reference internal" href="#module-teazertools.mean" id="id4"><a class="reference internal" href="#module-teazertools.mean" title="teazertools.mean"><tt class="xref py py-mod docutils literal"><span class="pre">teazertools.mean</span></tt></a></a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="module-teazertools.submitter">
<span id="teazertools-submitter"></span><h2><a class="toc-backref" href="#contents"><a class="reference internal" href="#module-teazertools.submitter" title="teazertools.submitter"><tt class="xref py py-mod docutils literal"><span class="pre">teazertools.submitter</span></tt></a></a><a class="headerlink" href="#module-teazertools.submitter" title="Permalink to this headline">¶</a></h2>
<p>This module provides the infrastructure to send job arrays of C++QED trajectory ensembles to the teazer cluster.</p>
<dl class="class">
<dt id="teazertools.submitter.GenericSubmitter">
<em class="property">class </em><tt class="descclassname">teazertools.submitter.</tt><tt class="descname">GenericSubmitter</tt><big>(</big><em>config</em><big>)</big><a class="headerlink" href="#teazertools.submitter.GenericSubmitter" title="Permalink to this definition">¶</a></dt>
<dd><p>This class generates various <a class="reference internal" href="#teazertools.submitter.JobArray" title="teazertools.submitter.JobArray"><tt class="xref py py-class docutils literal"><span class="pre">JobArray</span></tt></a> objects from a configuration file. For the syntax and usage, see
<a class="reference internal" href="teazertools.html#submitter-documentation"><em>Submitter</em></a>.</p>
<dl class="method">
<dt id="teazertools.submitter.GenericSubmitter.submit">
<tt class="descname">submit</tt><big>(</big><em>testrun=False</em>, <em>dryrun=False</em><big>)</big><a class="headerlink" href="#teazertools.submitter.GenericSubmitter.submit" title="Permalink to this definition">¶</a></dt>
<dd><p>Submit all job arrays to the teazer cluster.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>testrun</strong> (<em>bool</em>) &#8211; Perform a test run with only two seeds and <cite>T=1</cite>.</li>
<li><strong>dryrun</strong> (<em>bool</em>) &#8211; Don&#8217;t submit anything, instead print what would be run on the nodes.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="teazertools.submitter.JobArray">
<em class="property">class </em><tt class="descclassname">teazertools.submitter.</tt><tt class="descname">JobArray</tt><big>(</big><em>script, basename=None, parameters={}, basedir='.', tempdir='/tmp', seeds=[1001], averageids={}, diagnostics=True, matlab=True, average=True</em><big>)</big><a class="headerlink" href="#teazertools.submitter.JobArray" title="Permalink to this definition">¶</a></dt>
<dd><p>This class represents a job array to simulate a trajectory ensemble. A job array is characterized by
a set of seeds, one seed for each trajectory, and a set of C++QED parameters identical for all seed. Functions
are provided to submit the job array to the teazer cluster (test run is possible) or to simulate a specific
seed locally. For submitted job arrays, a further job depending on the array can be submitted to calculate
the ensemble averages of expectation values.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>script</strong> (<em>str</em>) &#8211; The name of the executable to call. This has to be an absolute path if it is not in the systems <cite>$PATH</cite>.</li>
<li><strong>basename</strong> (<em>str</em>) &#8211; The basename for output files. Defaults to the scriptname (without directory part).</li>
<li><strong>parameters</strong> (<em>dict</em>) &#8211; The C++QED parameters.</li>
<li><strong>basedir</strong> (<em>str</em>) &#8211; The directory for the output directory structure.</li>
<li><strong>tempdir</strong> (<em>str</em>) &#8211; A temporary directory for C++QED output (submitted jobs write to local disk, the files are moved at the end)</li>
<li><strong>seeds</strong> (<em>list</em>) &#8211; A list of seeds which defines the trajectory ensemble.</li>
<li><strong>averageids</strong> (<em>dict</em>) &#8211; A dictionary to define which columns of the output files contain expectation values, variances and standard
deviations.</li>
<li><strong>diagnostics</strong> (<em>bool</em>) &#8211; If <cite>True</cite>, print diagnostic messages to log files.</li>
<li><strong>matlab</strong> (<em>bool</em>) &#8211; If <cite>True</cite>, convert trajectories and state vector files to matlab format.</li>
<li><strong>average</strong> (<em>bool</em>) &#8211; If <cite>True</cite>, submit a job which calculates ensemble averages.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="teazertools.submitter.JobArray.diagnostics_after">
<tt class="descname">diagnostics_after</tt><big>(</big><big>)</big><a class="headerlink" href="#teazertools.submitter.JobArray.diagnostics_after" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is called after the executable finished. It can be overloaded in subclasses.
The default implementation writes a message to the log files.</p>
</dd></dl>

<dl class="method">
<dt id="teazertools.submitter.JobArray.diagnostics_before">
<tt class="descname">diagnostics_before</tt><big>(</big><big>)</big><a class="headerlink" href="#teazertools.submitter.JobArray.diagnostics_before" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is called before the executable is called. It can be overloaded in subclasses.
The default implementation writes a message with the hostname to the log file.</p>
</dd></dl>

<dl class="method">
<dt id="teazertools.submitter.JobArray.run">
<tt class="descname">run</tt><big>(</big><em>seed=0</em>, <em>dryrun=False</em><big>)</big><a class="headerlink" href="#teazertools.submitter.JobArray.run" title="Permalink to this definition">¶</a></dt>
<dd><p>If the environment variable <cite>$SGE_TASK_ID</cite> is set (i.e. we are on a node), simulate the trajectory
<cite>self.seeds[$SGE_TASK_ID]</cite>. Otherwise, simulate the trajectory <cite>self.seeds[seed]</cite> locally.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>seed</strong> (<em>int</em>) &#8211; The seed to simulate locally if <cite>$SGE_TASK_ID</cite> is not set.</li>
<li><strong>dryrun</strong> &#8211; If <cite>True</cite>, don&#8217;t simulate anything, but print a log message which contains the command that would
have been run.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="teazertools.submitter.JobArray.submit">
<tt class="descname">submit</tt><big>(</big><em>testrun=False</em><big>)</big><a class="headerlink" href="#teazertools.submitter.JobArray.submit" title="Permalink to this definition">¶</a></dt>
<dd><p>Submit the job array to teazer. Technically this is done by serializing the object, storing it in
the environment variable $JobArray and calling the helper script <cite>cppqedjob</cite>. The helper script
(running on a node) restores the object from the environment variable and calls <a class="reference internal" href="#teazertools.submitter.JobArray.run" title="teazertools.submitter.JobArray.run"><tt class="xref py py-func docutils literal"><span class="pre">run()</span></tt></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>testrun</strong> (<em>bool</em>) &#8211; Only simulate two seeds and set the parameter <cite>T</cite> to 1.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-teazertools.helpers">
<span id="teazertools-helpers"></span><h2><a class="toc-backref" href="#contents"><a class="reference internal" href="#module-teazertools.helpers" title="teazertools.helpers"><tt class="xref py py-mod docutils literal"><span class="pre">teazertools.helpers</span></tt></a></a><a class="headerlink" href="#module-teazertools.helpers" title="Permalink to this headline">¶</a></h2>
<p>This module defines some helper functions.</p>
<dl class="function">
<dt id="teazertools.helpers.generate_filelist">
<tt class="descclassname">teazertools.helpers.</tt><tt class="descname">generate_filelist</tt><big>(</big><em>basename</em>, <em>dirname</em><big>)</big><a class="headerlink" href="#teazertools.helpers.generate_filelist" title="Permalink to this definition">¶</a></dt>
<dd><p>This function generates a list of files which start with <cite>basename</cite> and either end with a digit (possibly with an <cite>.bz2</cite> extension)
:param basename: The files have to begin with this string.
:type basename: str
:param dirname: Search in this directory.
:type dirname: str
:returns: A list of matching filenames.
:retval: list</p>
</dd></dl>

<dl class="function">
<dt id="teazertools.helpers.matlab_range_to_list">
<tt class="descclassname">teazertools.helpers.</tt><tt class="descname">matlab_range_to_list</tt><big>(</big><em>s</em><big>)</big><a class="headerlink" href="#teazertools.helpers.matlab_range_to_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a list from a matlab-style range definition.
:param s: A range definition of the form <cite>start:[step:]stop</cite>. Only integers are supported, and <cite>stop</cite> is included.
:type s: str
:returns: A list <cite>[start,...,stop]</cite>
:retval: list</p>
</dd></dl>

<dl class="function">
<dt id="teazertools.helpers.product">
<tt class="descclassname">teazertools.helpers.</tt><tt class="descname">product</tt><big>(</big><em>*args</em>, <em>**kwds</em><big>)</big><a class="headerlink" href="#teazertools.helpers.product" title="Permalink to this definition">¶</a></dt>
<dd><p>This is an implementation of <tt class="xref py py-class docutils literal"><span class="pre">itertools.product</span></tt>, which is missing in Python 2.4.</p>
</dd></dl>

</div>
<div class="section" id="module-teazertools.mean">
<span id="teazertools-mean"></span><h2><a class="toc-backref" href="#contents"><a class="reference internal" href="#module-teazertools.mean" title="teazertools.mean"><tt class="xref py py-mod docutils literal"><span class="pre">teazertools.mean</span></tt></a></a><a class="headerlink" href="#module-teazertools.mean" title="Permalink to this headline">¶</a></h2>
<p>This module provides functions to average a C++QED MCWF trajectory and to save
the results to a file. It is also possible to convert the results to a format readable by matlab. The main
function is <a class="reference internal" href="#teazertools.mean.calculateMeans" title="teazertools.mean.calculateMeans"><tt class="xref py py-func docutils literal"><span class="pre">calculateMeans()</span></tt></a>.</p>
<dl class="function">
<dt id="teazertools.mean.calculateMeans">
<tt class="descclassname">teazertools.mean.</tt><tt class="descname">calculateMeans</tt><big>(</big><em>basename</em>, <em>expvals=</em><span class="optional">[</span><span class="optional">]</span>, <em>variances=</em><span class="optional">[</span><span class="optional">]</span>, <em>varmeans=</em><span class="optional">[</span><span class="optional">]</span>, <em>stdevs=</em><span class="optional">[</span><span class="optional">]</span>, <em>stdevmeans=</em><span class="optional">[</span><span class="optional">]</span>, <em>datadir='.'</em>, <em>outputdir='.'</em>, <em>usesaved=True</em>, <em>matlab=True</em><big>)</big><a class="headerlink" href="#teazertools.mean.calculateMeans" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the mean expectation values, mean variances and mean standard deviations from an
ensemble of C++QED MCWF trajectories. The results are saved to a file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>basename</strong> (<em>str</em>) &#8211; String with the basename of the files to import, e.g. &#8220;RingCavity&#8221;</li>
<li><strong>expvals</strong> (<em>list</em>) &#8211; List of indices which contain normal expectation values (Note: first column has index 1)</li>
<li><strong>variances</strong> &#8211; List of indices which contain variances</li>
<li><strong>varmeans</strong> &#8211; Corresponding mean values to the variances (if given, this list must have 
the same length as variances). This can be left empty, in which case the mean values
are expected in the column just before each variance, respectively.</li>
<li><strong>stdevs</strong> (<em>list</em>) &#8211; List of indices which contain standard deviations</li>
<li><strong>stdevmeans</strong> (<em>list</em>) &#8211; See <cite>varmeans</cite></li>
<li><strong>datadir</strong> (<em>str</em>) &#8211; Directory name from which files are loaded.</li>
<li><strong>outputdir</strong> (<em>str</em>) &#8211; Directory name where output is written to.</li>
<li><strong>usesaved</strong> &#8211; If true, only calculate the results if they have not been calculated before, otherwise try to load
results from the output directory. Previously calculated results are only used if all trajectory files are
older than the result file and if the set of <cite>expval</cite>, <cite>stdevs</cite>, <cite>variances</cite> etc is identical.</li>
<li><strong>matlab</strong> &#8211; Also convert results to matlab format and save a .mat file.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">An array containing the averaged expectation values, standard deviations and variances.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><tt class="xref py py-class docutils literal"><span class="pre">np.ndarray</span></tt></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="teazertools.mean.calculateRho">
<tt class="descclassname">teazertools.mean.</tt><tt class="descname">calculateRho</tt><big>(</big><em>basename</em>, <em>dirname='.'</em><big>)</big><a class="headerlink" href="#teazertools.mean.calculateRho" title="Permalink to this definition">¶</a></dt>
<dd><p>This function averages the density matrices in a C++QED MCWF trajectory ensemble. Note that the
equivalent matlab code is found to be orders of magnitude faster because of multi-threading.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>basename</strong> (<em>str</em>) &#8211; String with the basename of the files to import.</li>
<li><strong>dirname</strong> (<em>str</em>) &#8211; Directory name from which files are imported.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A tuple <cite>(timevec,rho)</cite>, first entry is the a vector of times at which statevector were printed,
the second entry is a <tt class="xref py py-class docutils literal"><span class="pre">np.ndarray</span></tt> where each row <cite>i</cite> corresponds to a averaged density matrix at
time <cite>timevec[i]</cite>.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Retval :</th><td class="field-body"><p class="first last">tuple</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">TeazerTools reference</a><ul>
<li><a class="reference internal" href="#module-teazertools.submitter"><tt class="docutils literal"><span class="pre">teazertools.submitter</span></tt></a></li>
<li><a class="reference internal" href="#module-teazertools.helpers"><tt class="docutils literal"><span class="pre">teazertools.helpers</span></tt></a></li>
<li><a class="reference internal" href="#module-teazertools.mean"><tt class="docutils literal"><span class="pre">teazertools.mean</span></tt></a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="reference.html"
                        title="previous chapter">PyCppQED Reference</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/reference_teazertools.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="reference.html" title="PyCppQED Reference"
             >previous</a> |</li>
        <li><a href="index.html">PyCppQED v0.1.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2009, Sebastian Krämer.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>